<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin â€” Quiz Manager</title>

  <link rel="stylesheet" href="style.css" />

  <style>
    .admin-panel { display:flex; gap:16px; align-items:flex-start; }
    .admin-list { width:100%; display:flex; flex-direction:column; gap:12px; }
    .admin-actions { display:flex; gap:8px; align-items:center; }
    .admin-item { display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:8px; background:var(--card); border:1px solid var(--glass); }
    .panel { display:none; margin-top:12px; }
    .panel.active { display:block; }
    .panel h3 { margin:0 0 8px 0 }
  </style>
</head>
<body>
<div class="app admin-app">

  <!-- ========== HEADER ========== -->
  <header class="topbar">
    <h1>Admin Panel</h1>
    <div class="top-actions">
      <label style="display:flex;align-items:center;gap:8px">
        <input id="themeToggleAdmin" type="checkbox" style="display:none" />
        <button id="themeBtnAdmin" class="btn circle">â˜¾</button>
      </label>
      <a class="btn" href="index.html">Public</a>
    </div>
  </header>

  <!-- ========== MAIN WRAPPER ========== -->
  <main class="container admin-container">

    <!-- ========== SIDEBAR ========== -->
    <aside id="sidebarBox" class="card left-panel wa-sidebar" style="min-width:260px; display:none;">
      <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px">
        <div class="badge" style="background:var(--accent);color:white">A</div>
        <div>
          <div style="font-weight:700">Admin Panel</div>
          <div class="muted" id="adminEmailLabel">Loadingâ€¦</div>
        </div>
      </div>

      <div id="logoutWrap" style="margin-top:8px; display:none;">
        <div class="muted">Signed in as <span id="signedEmail"></span></div>
        <div class="actions-row" style="margin-top:8px">
          <button id="btnLogout" class="btn ghost">Logout</button>
        </div>
      </div>

      <hr style="border:0;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0" />

      <div>
        <div style="font-weight:700;margin-bottom:8px">Menu</div>
        <div class="menu">
          <button data-view="dashboard" class="active">ğŸ“Š Dashboard</button>
          <button data-view="courses">ğŸ“š Mata Kuliah</button>
          <button data-view="peserta">ğŸ‘¥ Peserta</button>
          <button data-view="skor">ğŸ† Skor</button>
        </div>
      </div>
    </aside>


    <!-- ========== LOGIN PANEL (SHOW WHEN NOT LOGGED) ========== -->
    <section id="loginBox" class="card right-panel wa-main" style="max-width:420px; margin:auto; display:none;">
      <h2 style="margin-bottom:18px; text-align:center;">Login Admin</h2>
      <form id="loginForm" style="display:flex; flex-direction:column; gap:12px;">
        <input id="loginEmail" placeholder="Email admin" type="email" required />
        <input id="loginPass" placeholder="Password" type="password" required />
        <button type="submit" class="btn primary">Login</button>
      </form>
    </section>


    <!-- ========== MAIN ADMIN CONTENT ========== -->
    <section id="adminMain" class="card right-panel wa-main" style="flex:1; display:none;">
      <div class="wa-topbar wa-card" style="display:flex;justify-content:space-between;align-items:center;padding:12px">
        <h2 id="mainTitle" style="margin:0;font-size:18px">Dashboard</h2>
        <div>
          <button id="btnRefresh" class="btn ghost sm">â†»</button>
          <button id="btnNewCourse" class="btn sm" onclick="document.getElementById('addCourseBtn').click()">+ Course Baru</button>
        </div>
      </div>

      <div id="mainContent" class="wa-card" style="padding:16px">
        <!-- Dashboard -->
        <div id="dashboardView">
          <h3>Dashboard</h3>
          <p class="muted">Gunakan menu Mata Kuliah untuk mengelola.</p>
        </div>

        <!-- Courses panel -->
        <div id="coursesView" class="admin-panel" style="display:none; margin-top:12px">
          <div class="admin-list" style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <h3 style="margin:0">Mata Kuliah</h3>
              <button id="addCourseBtn" class="btn">+ Tambah</button>
            </div>
            <div id="coursesAdminList" style="margin-top:10px"></div>
          </div>

          <div style="width:360px;">

            <!-- Materi Panel -->
            <div id="materiPanel" class="panel">
              <h3 id="materiCourseTitle">Materi</h3>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <div class="muted">Daftar Materi</div>
                <button id="addMateriBtn" class="btn sm">+ Materi</button>
              </div>
              <div id="materiList"></div>
            </div>

            <!-- Soal Panel -->
            <div id="soalPanel" class="panel" style="margin-top:12px">
              <h3 id="soalMateriTitle">Soal</h3>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <div class="muted">Daftar Soal</div>
                <button id="addSoalBtn" class="btn sm">+ Soal</button>
              </div>
              <div id="soalList"></div>
            </div>

          </div>
        </div>
      </div>
    </section>

  </main>

  <footer class="footer" style="padding:10px 18px;text-align:center">
    <small>Admin Panel â€” Kelola Mata Kuliah, Materi & Soal</small>
  </footer>
</div>


<!-- ADMIN JS -->
<script type="module" src="admin-firebase.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const materiPanel = document.getElementById("materiPanel");
  const soalPanel = document.getElementById("soalPanel");
  materiPanel.style.display = "none";
  soalPanel.style.display = "none";

  document.querySelectorAll(".menu button").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".menu button").forEach(x => x.classList.remove("active"));
      btn.classList.add("active");
      const v = btn.dataset.view;

      document.getElementById("mainTitle").textContent = btn.textContent.trim();

      if (v === "courses") {
        document.getElementById("coursesView").style.display = "flex";
      } else {
        document.getElementById("coursesView").style.display = "none";
        materiPanel.style.display = "none";
        soalPanel.style.display = "none";
      }
    });
  });
});
</script>

</body>
</html>
