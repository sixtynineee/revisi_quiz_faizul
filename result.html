<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>QuizApp - Hasil Quiz</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="app">
        <header class="topbar">
            <h1>üèÜ QuizApp</h1>
            <div class="top-actions">
                <button id="themeToggle" class="btn circle">‚òæ</button>
                <a class="btn" href="index.html">Home</a>
                <a class="btn" href="quiz.html">Quiz Lain</a>
            </div>
        </header>

        <main class="container">
            <section class="card">
                <h2 id="resultTitle">Hasil Quiz</h2>
                <div id="resultContainer">
                    <p class="muted">Memuat hasil...</p>
                </div>
                
                <div class="actions-row" style="margin-top: 20px;">
                    <a href="quiz.html" class="btn primary">Kerjakan Quiz Lain</a>
                    <a href="index.html" class="btn">Kembali ke Home</a>
                </div>
            </section>
        </main>

        <footer class="footer">
            <small>¬© 2024 QuizApp ‚Ä¢ Halaman Hasil</small>
        </footer>
    </div>

    <script>
        // Display result
        const result = JSON.parse(localStorage.getItem('quizResult'));
        const resultContainer = document.getElementById('resultContainer');
        const resultTitle = document.getElementById('resultTitle');
        
        if (result) {
            const percentage = Math.round((result.score / result.totalQuestions) * 100);
            resultTitle.textContent = `Hasil: ${result.courseName}`;
            
            resultContainer.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <div style="font-size: 48px; font-weight: bold; color: var(--accent); margin-bottom: 10px;">
                        ${result.score}/${result.totalQuestions}
                    </div>
                    <div style="font-size: 24px; margin-bottom: 20px;">
                        ${percentage}%
                    </div>
                    
                    <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 30px;">
                        <div style="text-align: center;">
                            <div style="font-size: 32px; color: var(--success);">${result.score}</div>
                            <div style="font-size: 14px; color: var(--muted);">Benar</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 32px; color: var(--danger);">${result.totalQuestions - result.score}</div>
                            <div style="font-size: 14px; color: var(--muted);">Salah</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 32px; color: var(--primary);">${result.totalQuestions}</div>
                            <div style="font-size: 14px; color: var(--muted);">Total</div>
                        </div>
                    </div>
                    
                    <h3>Review Jawaban:</h3>
                    <div style="text-align: left; margin-top: 20px;">
                        ${result.questions.map((q, index) => {
                            const userAnswer = result.userAnswers[index];
                            const correctAnswer = q.jawaban || q.correct;
                            const isCorrect = userAnswer === correctAnswer;
                            
                            return `
                                <div class="result-row ${isCorrect ? 'correct' : 'incorrect'}">
                                    <div class="question"><b>${index + 1}. ${q.pertanyaan || q.question}</b></div>
                                    <div class="answer">Jawaban Anda: <b>${userAnswer || 'Tidak dijawab'}</b> ${isCorrect ? '‚úì' : '‚úó'}</div>
                                    <div class="correct-answer">Jawaban benar: <b>${correctAnswer}</b></div>
                                    ${q.explanation ? `<div class="explanation">Penjelasan: ${q.explanation}</div>` : ''}
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        } else {
            resultContainer.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <p class="muted">Tidak ada hasil quiz yang ditemukan</p>
                    <a href="quiz.html" class="btn primary" style="margin-top: 20px;">Mulai Quiz Baru</a>
                </div>
            `;
        }
        
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark');
                themeToggle.textContent = '‚òÄ';
            }
        }
        
        initTheme();
        
        themeToggle.addEventListener('click', () => {
            const isDark = document.body.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeToggle.textContent = isDark ? '‚òÄ' : '‚òæ';
        });
    </script>
</body>
</html>
